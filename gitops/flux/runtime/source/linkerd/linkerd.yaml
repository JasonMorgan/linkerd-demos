apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: linkerd
  namespace: flux-system
spec:
  timeout: 3m
  interval: 40m
  releaseName: linkerd
  targetNamespace: linkerd
  storageNamespace: linkerd
  chart:
    spec:
      chart: linkerd
      sourceRef:
        kind: HelmRepository
        name: linkerd
        namespace: flux-system
      interval: 40m
  values:
    identityTrustAnchorsPEM: | 
      -----BEGIN CERTIFICATE-----
      MIIBjjCCATOgAwIBAgIQZvALyxpN0z9AwMEqp9ScrTAKBggqhkjOPQQDAjAlMSMw
      IQYDVQQDExpyb290LmxpbmtlcmQuY2x1c3Rlci5sb2NhbDAeFw0yMTExMTMxNjQ4
      MDFaFw0zMTExMTExNjQ4MDFaMCUxIzAhBgNVBAMTGnJvb3QubGlua2VyZC5jbHVz
      dGVyLmxvY2FsMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE8FWULFxvTsMldrKO
      H6Mlt8GHAN4p91FAMQfXhX7JP5ikF9nMKD52JwTFJb4yHUq+XHca9b2KiYPfNgjg
      oewda6NFMEMwDgYDVR0PAQH/BAQDAgEGMBIGA1UdEwEB/wQIMAYBAf8CAQEwHQYD
      VR0OBBYEFIbxBaxtjqc44MQYtJVBs/BdOEvmMAoGCCqGSM49BAMCA0kAMEYCIQCL
      y3Nx7PPEJ0vxw7biltLX4UErw9JgFWuD4eez9KnbTAIhAORncOwa0ZcekBCa6JYH
      AVOvexMpzewRdr44VhuEohxq
      -----END CERTIFICATE-----
    identity.issuer.crtExpiry: 2022-11-13T11:56:59Z
  valuesFrom:
    - kind: Secret
      name: identity.issuer.tls.crtPEM
      valuesKey: tls.crt
    - kind: Secret
      name: identity.issuer.tls.keyPEM
      valuesKey: tls.key
  postRenderers:
  install:
    crds: CreateReplace
  upgrade:
    crds: CreateReplace
---
apiVersion: source.toolkit.fluxcd.io/v1beta1
kind: HelmRepository
metadata:
  name: linkerd
  namespace: flux-system
spec:
  interval: 2m
  url: https://helm.linkerd.io/stable
---
kind: Namespace
apiVersion: v1
metadata:
  name: linkerd
---
kind: Secret
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJqakNDQVRPZ0F3SUJBZ0lRWnZBTHl4cE4wejlBd01FcXA5U2NyVEFLQmdncWhrak9QUVFEQWpBbE1TTXcKSVFZRFZRUURFeHB5YjI5MExteHBibXRsY21RdVkyeDFjM1JsY2k1c2IyTmhiREFlRncweU1URXhNVE14TmpRNApNREZhRncwek1URXhNVEV4TmpRNE1ERmFNQ1V4SXpBaEJnTlZCQU1UR25KdmIzUXViR2x1YTJWeVpDNWpiSFZ6CmRHVnlMbXh2WTJGc01Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRThGV1VMRnh2VHNNbGRyS08KSDZNbHQ4R0hBTjRwOTFGQU1RZlhoWDdKUDVpa0Y5bk1LRDUySndURkpiNHlIVXErWEhjYTliMktpWVBmTmdqZwpvZXdkYTZORk1FTXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRRXdIUVlEClZSME9CQllFRklieEJheHRqcWM0NE1RWXRKVkJzL0JkT0V2bU1Bb0dDQ3FHU000OUJBTUNBMGtBTUVZQ0lRQ0wKeTNOeDdQUEVKMHZ4dzdiaWx0TFg0VUVydzlKZ0ZXdUQ0ZWV6OUtuYlRBSWhBT1JuY093YTBaY2VrQkNhNkpZSApBVk92ZXhNcHpld1JkcjQ0Vmh1RW9oeHEKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUllZk9rRzRqOUdjQXhoVnhYUWhqdEl0WlY5UVNMbHQwWnlobGFZZ1ZlL1FvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFOEZXVUxGeHZUc01sZHJLT0g2TWx0OEdIQU40cDkxRkFNUWZYaFg3SlA1aWtGOW5NS0Q1MgpKd1RGSmI0eUhVcStYSGNhOWIyS2lZUGZOZ2pnb2V3ZGF3PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
